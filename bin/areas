#!/usr/bin/env ruby
#
# Lists all available areas of responsibility

require_relative '../lib/alfred_helper'
require_relative '../lib/config'

Alfred::filter do
  config = Config.load
  focus = config.focused_area[:key]
  config.areas.map do |name|
    area = config.area(name)
    subtitle = area[:key].eql?(focus) ? 'Currently focused' : ''
    {
      uid: area[:key],
      arg: area[:key],
      title: area[:name],
      subtitle: subtitle,
      autocomplete: area[:name]
    }
  end
end
